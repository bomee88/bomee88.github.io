---
title : "[íŒ¨ìŠ¤íŠ¸ìº í¼ìŠ¤ ìˆ˜ê°• í›„ê¸°] í”„ë¡ íŠ¸ì—”ë“œ ì¸ê°• 100% í™˜ê¸‰ ì±Œë¦°ì§€ 27íšŒì°¨ ë¯¸ì…˜ - 30ê°• useReducer"
date : 2020-09-05
categories : fastcampus 
tags : fastcampus all-in-one-challenge day27 react 
---
# useReducer

ì»´í¬ë„ŒíŠ¸ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•´ì•¼í• ë•ŒëŠ” useStateë¥¼ ì‚¬ìš©í•´ì„œ ì—…ë°ì´íŠ¸ í•´ì¤¬ëŠ”ë° ê·¸ê²ƒ ë§ê³ ë„ useReducerë¥¼ ì‚¬ìš©í•´ì„œë„ ì—…ë°ì´íŠ¸ í•´ì¤„ ìˆ˜ ìˆë‹¤. ì–´ë–¤ ì°¨ì´ê°€ ìˆëƒë©´ useStateëŠ” ì„¤ì •í•˜ê³  ì‹¶ì€ ë‹¤ìŒ ìƒíƒœë¥¼ ì§ì ‘ ì§€ì •í•´ì£¼ëŠ” ë°©ì‹ìœ¼ë¡œ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•˜ëŠ” ë°˜ë©´ì— ì•¡ì…˜ì´ë¼ëŠ” ê°ì²´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸ í•œë‹¤. ì—¬ê¸°ì„œ ì•¡ì…˜ê°ì²´ë¼ëŠ” ê²ƒì€ ì—…ë°ì´íŠ¸í• ë•Œ ì°¸ì¡°í•˜ëŠ” ê²ƒì¸ë°, ì—¬ê¸°ì„œ íƒ€ì…ì´ë€ ê°’ì„ ì–´ë–¤ ì—…ë°ì´íŠ¸ë¥¼ í• ê²ƒì¸ì§€ ëª…ì‹œí•  ìˆ˜ ìˆê³ , ì—…ë°ì´íŠ¸í• ë•Œ ì°¸ì¡°í•˜ê³  ì‹¶ì€ ë‹¤ë¥¸ ê°’ì´ ìˆë‹¤ë©´ ì´ ê°ì²´ì•ˆì— ë„£ì„ ìˆ˜ë„ ìˆë‹¤. useReducerëŠ” **ìƒíƒœ ì—…ë°ì´íŠ¸ ë¡œì§ì„ ì»´í¬ë„ŒíŠ¸ ë°–ìœ¼ë¡œ ë¶„ë¦¬ì‹œí‚¬ ìˆ˜ ìˆë‹¤**. ì‹¬ì§€ì–´ ë‹¤ë¥¸íŒŒì¼ì— ì‘ì„± í›„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ë„ ìˆë‹¤. ì—¬ê¸°ì„œ reducerì´ë€ ê°œë…ì´ ìˆëŠ”ë° ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” í•¨ìˆ˜ë¥¼ ì˜ë¯¸í•œë‹¤. ì´ í•¨ìˆ˜ëŠ” ì•„ë˜ì™€ ê°™ì´ ìƒê²¼ë‹¤.   
![ë¦¬ë“€ì„œ](/images/200905-1.png)  
í˜„ì¬ ìƒíƒœì™€ ì•¡ì…˜ ê°ì²´ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ë°›ì•„ì™€ì„œ ìƒˆë¡œìš´ ìƒíƒœë¥¼ ë°˜í™˜í•´ì£¼ëŠ” í˜•íƒœë¥¼ ê°–ì¶”ê³  ìˆì–´ì•¼ í•œë‹¤.
(ì•¡ì…˜íƒ€ì…ì„ ë°›ì•„ì˜¤ê³  ì•¡ì…˜íƒ€ì…ì´ INCREMENTë©´ +1ì„ ë°˜í™˜, DECREMENTë©´ -1ì„ ë°˜í™˜)  
![ë¦¬ë“€ì„œ](/images/200905-2.png)  
useReducerë¥¼ ì“¸ë•ŒëŠ” ìœ„ì™€ ê°™ì´ ì“´ë‹¤.(reducer ë’¤ì—ëŠ” ê¸°ë³¸ê°’ì„ ë„£ì–´ì¤Œ-ìˆ«ì.ë¬¸ì.ê°ì²´ë“± ë¬´ê´€)  
numberëŠ” í˜„ì¬ ìƒíƒœ, dispatchì˜ ì˜ë¯¸ëŠ” ë³´ë‚´ë‹¤, ì—¬ê¸°ì„œëŠ” ì•¡ì…˜ì„ ë°œìƒì‹œí‚¨ë‹¤ê³  ì´í•´í•˜ë©´ ì‰½ë‹¤.  
ì´ì œ ìš°ë¦¬ê°€ ê¸°ì¡´ì— ë§Œë“¤ì—ˆë˜ ì½”ë“œì— ì‹¤ìŠµí•´ë³´ì.  

> Counter.js   
  
```javascript
import React, { useReducer } from 'react';

function reducer(state, action){
    switch (action.type){
        case 'INCREMENT' :
            return state + 1;
        case 'DECREMENT' :
            return state -1;
        default:
            throw new Error('Unhandled action');
    }
}

function Counter(){
    const [number, dispatch] = useReducer(reducer, 0);

    const onIncrease = () => {
        dispatch({
            type: 'INCREMENT'
        })
    }
    const onDecrease = () => {
        dispatch({
            type: 'DECREMENT'
        })
    }
    return(
        <div>
            <h1>{number}</h1>
            <button onClick={onIncrease}>+1</button>
            <button onClick={onDecrease}>-1</button>
        </div>
    )
}
export default Counter;
```
ì´ë ‡ê²Œ ìˆ˜ì •í•˜ê³  index.jsì—ì„œ ìƒˆë¡œ ê³ ì¹œ Counterì»´í¬ë„ŒíŠ¸ë¥¼ ë°›ì•„ì™€ì¤˜ì„œ í™”ë©´ì— í…ŒìŠ¤íŠ¸í•´ë³´ì.  
> index.js   

```javascript
import React from 'react';
import ReactDOM from 'react-dom';
import './index.css';
import App from './App';
import Counter from './Counter';
import * as serviceWorker from './serviceWorker';

ReactDOM.render(<Counter />,document.getElementById('root'));
serviceWorker.unregister();
```
í™”ë©´ì„ ëŒë ¤ë³´ë©´ ê¸°ì¡´ì˜ ì¹´ìš´íŠ¸ê°€ ì˜ êµ¬í˜„ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.  
![ë¦¬ì•¡íŠ¸í™”ë©´](/images/200905-3.png)   
ì´ì œ ìš°ë¦¬ê°€ useReducerê°€ ì–´ë–»ê²Œ êµ¬í˜„ë˜ëŠ”ì§€ëŠ” ì˜ í™•ì¸í•´ë³´ì•˜ë‹¤. ì´ë²ˆì—ëŠ” ìš°ë¦¬ê°€ ë§Œë“¤ì—ˆë˜ App.jsë¥¼ ì•„ì˜ˆ useReducerë¥¼ ì‚¬ìš©í•´ì„œ ì „ë©´ ê°œí¸í•´ë³´ì.  
ì•„ë˜ì™€ ê°™ì´ App,jsì½”ë“œë¥¼ ê³ ì³ì¤€ë‹¤.  
> App.js  

```javascript
import React, { useRef, useReducer, useMemo, useCallback } from 'react';
import UserList from './UserList';
import CreateUser from './CreateUser';

function countActiveUsers(users){
  console.log('í™œì„± ì‚¬ìš©ì ìˆ˜ë¥¼ ì„¸ëŠ”ì¤‘...');
  return users.filter(user => user.active).length;
}

const initialState = {
  inputs:{
    username: '',
    email: '',
  },
  users: [
      {
        id: 1,
        username: 'bmyu',
        email: 'bomee88@naver.com',
        active: true,
    },
    {
        id: 2,
        username: 'tester',
        email: 'tester@example.com',
        active: false,
    },
    {
        id: 3,
        username: 'sample',
        email: 'sample@example.com',
        active: false,
    }
  ]
}

function reducer(state, action){
  switch (action.type){
    case 'CHANGE_INPUT':
      return{
        ...state,
        inputs: {
          ...state.inputs,
          [action.name]: action.value
        }
      };
    case 'CREATE_USER':
      return {
        inputs: initialState.inputs,
        users: state.users.concat(action.user)
      }
    case 'TOGGLE_USER':
      return {
        ...state,
        users: state.users.map(user =>
          user.id === action.id
          ? { ...user, active: !user.active }
          : user
          )
      };
    case 'REMOVE_USER':
      return {
        ...state,
        users: state.users.filter(user => user.id !== action.id)
      }
    default:
      throw new Error('Unhandled action');
  }
}

function App() {
  const [state, dispatch] = useReducer(reducer, initialState);
  const nextId = useRef(4);
  const { users } = state;
  const {username, email } = state.inputs;

  const onChange = useCallback(e => {
    const { name, value } = e.target;
    dispatch({
      type: 'CHANGE_INPUT',
      name,
      value
    })
  },[]);
  const onCreate = useCallback(() => {
    dispatch({
      type: 'CREATE_USER',
      user: {
        id: nextId.current,
        username,
        email,
      }
    });
    nextId.current += 1;
  }, [username, email]);

  const onToggle = useCallback (id => {
    dispatch({
      type: 'TOGGLE_USER',
      id
    })
  },[]);

  const onRemove = useCallback (id => {
    dispatch({
      type: 'REMOVE_USER',
      id
    })
  },[]);

  const count = useMemo(() => countActiveUsers(users),[users])

  return(
    <>
      <CreateUser 
        username={username} 
        email={email} 
        onChange={onChange}
        onCreate={onCreate}
        
      />
      <UserList 
        users={users} 
        onToggle={onToggle} 
        onRemove={onRemove}
      />
      <div>í™œì„± ì‚¬ìš©ì ìˆ˜ : {count}</div>
    </>
  )
}

export default App;
```
ë¦¬ì•¡íŠ¸ë¥¼ ì‹¤í–‰ì‹œì¼œë³¸ë‹¤. ê·¸ì „ê³¼ ë˜‘ê°™ì´ ì˜ êµ¬í˜„ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. ê·¸ëŸ¼ ì—¬ê¸°ì„œ ìš°ë¦¬ëŠ” ì–´ë–¨ë•Œ useReducerë¥¼ ì“°ê³  ì–´ë–¨ë•Œ useStateë¥¼ ì“°ëŠ”ì§€ ê¶ê¸ˆí•´ì§„ë‹¤. 
![useReducer vs useState](/images/200905-4.png)   
ì •í•´ì§„ ë‹µì€ ì—†ë‹¤. ê·¸ëŸ°ë° ê´€ë¦¬í•  ê°’ì´ ê°„ë‹¨í•  ê²½ìš°ì—ëŠ” useStateê°€ í¸í•˜ê³   ê´€ë¦¬í•  ê°’ì´ ë§ì•„ì„œ ë³µì¡í• ë•ŒëŠ” useReducerê°€ í¸í•˜ë‹¤. 


ì˜¤ëŠ˜ì€ ì—¬ê¸°ê¹Œì§€..    
ì‹œì²­ ì˜ìƒ 30ê°• 21~22ê¹Œì§€  
 
![ìˆ˜ê°•ì¸ì¦ì´ë¯¸ì§€](/images/200905-5.jpeg)   
   
í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ ì˜¬ì¸ì› íŒ¨í‚¤ì§€ with React Online. ğŸ‘‰ https://bit.ly/31Cf1hp